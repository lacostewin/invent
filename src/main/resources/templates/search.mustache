<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css.css">
    <title>Поиск ТМЦ "НП ИВЦ"</title>
</head>
<body>
<h1>Hello, [[${#httpServletRequest.remoteUser}]]!</h1>
<a href="/main">Добавить ТМЦ</a>
<div><H2>Найти ТМЦ:</H2></div>
<form method="post" action="search">
    <input type="text" name="searchsn" autofocus placeholder="Серийный номер или наименование"/>
    <button type="submit">Найти</button>
    <input type="hidden" name="_csrf" value="{{_csrf.token}}" />
</form>

<p>Список ТМЦ:</p>
<table class="tmc">
    <thead>
    <tr>
        <th>ID ТМЦ</th><th>Наименование ТМЦ</th><th>Серийный номер ТМЦ</th><th>За кем числится</th>
    </tr>
    </thead>
    <tbody>
    {{#messages}}
        <tr>
            <td>{{id}}</td>
            <td><span>{{text}}</span></td>
            <td><i>{{sn}}</i></td>

            <td>
                <form action="/updates" method="post" name="update" onsubmit="return confirm('Вы действительно хотите изменить владельца?');">
                    <select name="owner">
                        <option selected>{{owner}}</option>
                        {{#list}}<option >{{.}}</option>{{/list}}
                    </select>

                    <input type="submit" value="Изменить владельца" />
                    <input type="hidden" name="_csrf" value="{{_csrf.token}}" />
                    <input type="hidden" name="id" value="{{id}}"/>
                    <input type="hidden" name="sn" value="{{sn}}"/>
                    <input type="hidden" name="text" value="{{text}}"/>

                </form>
            </td>
            <td>
                <form action="/removes" method="post" name="remove" onsubmit="return confirm('Это удалит все записи о ТМЦ с этим серийным номером {{sn}} из базы данных. Вы уверены?');">
                    <input type="submit" value="Удалить ТМЦ" />
                    <input type="hidden" name="_csrf" value="{{_csrf.token}}" />
                    <input type="hidden" name="sn" value="{{sn}}"/>
                </form>
            </td>

        </tr>
    {{/messages}}
    </tbody>
</table>

<form action="/logout" method="post">
    <input type="submit" value="Выйти"/>
    <input type="hidden" name="_csrf" value="{{_csrf.token}}" />
</form>
</body>
</html>